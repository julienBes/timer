<html>

<!--
TimerV2 : Cr√©√© par Julien Besombes le 01/11/2023
Rejoignez moi sur Linkedin : https://www.linkedin.com/in/julienbesombes/
-->

<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NTV92QTB');
    </script>
    <!-- End Google Tag Manager -->


    <title>Timer : Cr√©√© avec üíô par Julien Besombes</title>
    <style>
        body {
            background-color: #0e79b2; 
            color: #FFFFFFDD; 
            font-family: system-ui;
        }

        #timer {
            margin: -10vw 0vw 0vw 0vw  ;  
            font-size: 36vw;
            width: 100%;
            text-align: center;
        }

        .timer-button {
            background-color: #00000000; 
            color: #FFFFFF50; 
            border: 1px solid #FFFFFF50 ; 
            margin: 0.5vw; 
            font-size: 2vw; 
        }

        .link {
            color: #FFFFFF50; 
            font-size: 12px; 
        }
        .divlink {
            margin: 10px;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTV92QTB"
    height="0" width="0" style="display:none;visibility:hidden">
        </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->


    <div id="timer"> 00:00</div>
    <div class="divlink"> 
      <a class="link" href="https://www.linkedin.com/in/julienbesombes/"> Timer : Cr√©√© avec üíô par Julien Besombes </a>
    </div>
    <div class="divlink"> 
      <a class="link" href="?timer=90"> ‚è±Ô∏è Dur√©e perso </a>
    </div>
    <button class="timer-button" onclick="startTimer(10)"> 10''</button>
    <button class="timer-button" onclick="startTimer(30)"> 30''</button>
    <button class="timer-button" onclick="startTimer(60)"> 1'</button>
    <button class="timer-button" onclick="startTimer(90)"> 90''</button>
    <button class="timer-button" onclick="startTimer(120)"> 2'</button>
    <button class="timer-button" onclick="startTimer(180)"> 3'</button>
    <button class="timer-button" onclick="startTimer(240)"> 4'</button>
    <button class="timer-button" onclick="startTimer(300)"> 5'</button>
    <button class="timer-button" onclick="startTimer(360)"> 6'</button>
    <button class="timer-button" onclick="startTimer(420)"> 7'</button>
    <button class="timer-button" onclick="startTimer(480)"> 8'</button>
    <button class="timer-button" onclick="startTimer(540)"> 9'</button>
    <button class="timer-button" onclick="startTimer(600)"> 10'</button>
    <button class="timer-button" onclick="startTimer(720)"> 12'</button>
    <button class="timer-button" onclick="startTimer(900)"> 15'</button>
    <button class="timer-button" onclick="startTimer(1200)"> 20'</button>
    <button class="timer-button" onclick="startTimer(1500)"> 25'</button>
    <button class="timer-button" onclick="startTimer(1800)"> 30'</button>
    <button class="timer-button" onclick="startTimer(2700)"> 45'</button>
    <button class="timer-button" onclick="startTimer(3600)"> 60'</button>
    <button class="timer-button" onclick="startTimer(-1)"> ‚è±Ô∏è </button>

    </br>

    <script>
        let timerInterval; // Ajout de la variable globale

        let timeLeft;
        const timerDisplay = document.getElementById('timer');

        function updateTimerDisplay() {
            timerDisplay.textContent = " " + formatTime(timeLeft);
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes < 10 ? '0' : ''}${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        function startTimer(seconds) {
            clearInterval(timerInterval); // Arr√™ter l'intervalle pr√©c√©dent s'il existe
            if (seconds ===-1) {
              var url = window.location.href;
              var urlParams = new URLSearchParams(url.split('?')[1]);
              var timerParam = urlParams.get('timer');
              var seconds = timerParam;
            }
            if (seconds === null) {
              var seconds = 1;
            }

            timeLeft = seconds;
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();

                if (timeLeft === 0) {
                    clearInterval(timerInterval);
                    var audio = new Audio('tchin.mp3');
                    audio.play();
                    //alert('Le minuteur est termin√© !');
                }
            }, 1000);
        }
    </script>
</body>
</html>
